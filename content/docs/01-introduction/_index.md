---
title: "介绍"
weight: 1
---

# 介绍

欢迎使用 backtrader 文档！Backtrader 框架的目标是让你易于使用。

## 基本流程

使用 Backtrader 编写交易流程的步骤如下：

1. 创建策略类，基于 `backtrader.Strategy` 类。
2. 决定可调参数，如设置佣金费率、滑点、账户金额等。
3. 在策略中实例化所需的指标并定义计算规则。
4. 编写进出市场的交易逻辑。
5. 或者，可以预先准备一些作为多/空信号的指标，简化策略编写。

现在，我们有了一个策略类：

1. 创建一个 Cerebro 引擎并注入策略（或基于信号的策略）。
2. 加载并注入数据源（使用 `cerebro.adddata` 方法）。
3. 执行 `cerebro.run()` 开始模拟整个交易过程。

**评估绘图：**

如需视觉反馈，可以使用 `cerebro.plot()` 进行绘图。

Backtrader 具有高度的可配置性，希望您觉得该平台有用且有趣。

## 特性一览

### 实时交易

- 支持与 Interactive Brokers、Oanda v1、VisualChart 的实时交易。
- 支持外部第三方经纪商（如 Alpaca、Oanda v2、ccxt 等）。

### 基于0的索引

- 使用0表示当前时刻，避免访问数组时的前视偏差。
- 使用负值（如 -1、-2）表示最后时刻，与 Python 的定义一致。
- 任何正索引表示未来（仅事件模式下测试代码时会出错）。

### 事件驱动和向量化

- 交易逻辑和经纪商总是在逐事件基础上运行。
- 指标计算尽可能向量化（源数据可以预加载）。
- 可以在仅事件模式下运行，无需预加载数据，如同实时交易。

### Data Feed（支持实时）

- 支持多种数据源：CSV、数据库源、YahooFinance、Interactive Brokers、Oanda v1 等。
- 可同时运行多个同步数据源（受内存限制）。
- 支持多种时间框架，并集成重采样和重放功能。

### 内置经纪商

- 支持多种订单类型：市价单、限价单、止损单、止损限价单、追踪止损单、追踪止损限价单、OCO（一次取消其他）、Bracket、收盘市价单。
- 支持多空交易。
- 针对期货类工具的连续现金调整。
- 用户定义的佣金方案和信用利息。
- 基金模式。
- 成交量填充策略。
- 自定义滑点。

### 策略逻辑

- 在操作之前自动计算预热期。
- 多个策略（针对同一经纪商）可以并行运行。
- 多种订单生成方法（买入/卖出、目标订单等）。
- 事件通知：新数据、数据馈送提供者、订单、交易、计时器。

### 指标

- 超过122种指标，包括常见指标。
- 多种移动平均线（SMA、EMA 等）、经典指标（MACD、随机指标、RSI 等）。
- 集成 ta-lib。

### 性能分析器

- 多个内置性能分析器（时间收益、交易分析器、夏普比率、VWR、SQN 等）。

### 绘图（额外）

- 通过一个命令自动（可定制）绘图。

> 注意：为使此功能正常工作，需要安装 Matplotlib。

### 持仓管理

- 定义并插入智能自动化持仓策略。

### 观察者

- 可绘制的代理，可以观察系统中的所有内容（通常用于绘制统计数据）。

### 杂项

- 用于定期重复操作的计时器。
- 交易日历。
- 时区支持。

## 纯 Python

- 使用 Python，不需要外部库。
- 使用面向对象技术轻松拼接各个部分。
- 运算符重载提供自然语言构造，例如：
```python
av_diff = bt.ind.SMA(period=30) - bt.ind.SMA(period=15)
```
其中 `av_diff` 包含30周期和15周期的简单移动平均线差值。
- 对于无法重载的语言构造（如 and、or、if），提供等效函数以确保功能不丢失，例如：
```python
av_and = bt.And(av_diff > 0, self.data.close < bt.ind.SMA(period=30))
```
